<table class="table align-middle my-4">
    <thead class="table-light text-center">
        <tr>
            <th>Company</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Status</th>
            <th class="text-end" style="width: 160px;">Action</th>
        </tr>
    </thead>

    <tbody class="text-center">
        {% for agent in agents %}
        <tr>
            <td class="fw-semibold">
                {{ agent.company_name }}
            </td>

            <td>
                {{ agent.user.email }}
            </td>

            <td>
                {{ agent.phone or '' }}
            </td>

            <td>
                <span class="badge {{ 'bg-success' if agent.status == 'active' else 'bg-secondary' }}">
                    {{ agent.status|capitalize }}
                </span>
            </td>

            <td class="text-end">
                <a href="{{ url_for('agent_edit_page', agent_id=agent.id) }}"
                   class="btn btn-sm btn-edit">
                    Edit
                </a>

                <form method="post"
                      action="{{ url_for('agent_delete', agent_id=agent.id) }}"
                      class="d-inline">
                    <button
                        type="submit"
                        class="btn btn-sm btn-delete"
                        onclick="return confirm('Delete this agent?')">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="6" class="text-center text-muted py-4">
                No agents found
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Pagination -->
{% if pagination.total_pages > 1 %}
<div class="p-3 border-top">
    <ul class="pagination justify-content-center mb-0">

        {% if pagination.page > 1 %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ pagination.page - 1 }}&search={{ search }}">
                &laquo;
            </a>
        </li>
        {% endif %}

        {% for p in range(1, pagination.total_pages + 1) %}
        <li class="page-item {{ 'active' if p == pagination.page }}">
            <a class="page-link"
               href="?page={{ p }}&search={{ search }}">
                {{ p }}
            </a>
        </li>
        {% endfor %}

        {% if pagination.page < pagination.total_pages %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ pagination.page + 1 }}&search={{ search }}">
                &raquo;
            </a>
        </li>
        {% endif %}

    </ul>
</div>
{% endif %}
