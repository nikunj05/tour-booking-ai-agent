{% extends "layout.html" %}

{% block content %}
<section class="content-header px-1">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <h1>Tour & Travel Agents</h1>
        <a href="{{ url_for('agent_create_page') }}" class="btn btn-primary">+ Add Agent</a>
    </div>
    <hr>
</section>

<section class="content">
<div class="container-fluid">

    <table id="agentsTable" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Company Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

</div>
</section>
{% endblock %}

{% block extra_js %}
<!-- Include jQuery & DataTables JS (CDN) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"/>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function() {
    $('#agentsTable').DataTable({
        processing: true,
        serverSide: true,
        ajax: {
            url: "{{ url_for('agent_datatable') }}",
            type: "GET",
        },
        columns: [
            { data: "id" },
            { data: "company_name" },
            { data: "email" },
            { data: "phone" },
            { data: "status" },
            { data: "actions", orderable: false, searchable: false },
        ],
        order: [[0, 'desc']],
    });
});
</script>
{% endblock %}
