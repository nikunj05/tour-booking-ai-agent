{% extends "partials/authmaster.html" %}

{% block content %}
<div class="card authentication-field">
    <div class="card-body login-card-body">

        <div class="heading-section text-center">
            <h2 class="auth-heading">Forgot Password</h2>
            <p class="auth-description">
                Enter your email to receive a reset link
            </p>
        </div>

        {% if message %}
            <div class="alert alert-success">{{ message }}</div>
        {% endif %}

        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <form method="post"
              action="{{ request.url_for('forgot_password_submit') }}"
              id="forgotPasswordForm"
              novalidate>

            <div class="input-field">
                <input type="email"
                       name="email"
                       class="form-control"
                       placeholder="Enter your email"
                       required>
            </div>

            <button type="submit"
                    class="btn button-default w-100 mt-4">
                Send Reset Link
            </button>
                        
            <div class="login-forget-password my-2 text-right">
                <a href="{{ request.url_for('login_page') }}">
                    Back to login?
                </a>
            </div>

        </form>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$("#forgotPasswordForm").validate({
    rules: {
        email: { required: true, email: true }
    },
    errorElement: "span",
    errorClass: "invalid-feedback",
    highlight: el => $(el).addClass("is-invalid"),
    unhighlight: el => $(el).removeClass("is-invalid")
});
</script>
{% endblock %}
